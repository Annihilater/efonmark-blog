Python
======

Pipenv & 虚拟环境
-------------

https://pythonguidecn.readthedocs.io/zh/latest/dev/virtualenvs.html

```shell
sudo apt install virtualenv
virtualenv -p /usr/bin/python3.6 venv # -p参数指定Python解释器程序路径
source venv/bin/activate　# 使虚拟环境生效，与系统python环境隔离开来。
source venv/bin/deactivate # 停止虚拟环境
```



编码规范
----

*****


* 函数描述

```python
	@ 图片清晰度计算: 9点差值权重计算
	@
	@ return     cal_val      清晰度
	@
	@ param      file_path    图片路径
	@ exception
	@ notice
```

*****


正则表达式
-----
```python
import re
str = "a123b456b"

print re.findall(r"a(.+?)b", str)
#输出['123']，‘?’控制只匹配0或1个,所以只会输出和最近的b之间的匹配情况
#用?来控制正则贪婪和非贪婪匹配;(.*?) 小括号来控制是否包含匹配的关键字
print re.findall(r"a(.+)b", str)
#输出['123b456']

print re.findall(r"a.*b", str)
#输出['a123b456b']
```



*****


环境配置
----

*****



* windows read() gbk报错：

subprocess.py里
	check_output(cmd, shell=True, universal_newlines=True, stderr=STDOUT, encoding='utf-8'



*****


图文识别
----
```python
print(pytesser3.image_file_to_string('/home/soy/00_workspace_python/auto_opt/en_chsim.png'))

im = Image.open('/home/soy/00_workspace_python/auto_opt/screencap.png')
text = pytesseract.image_to_string((im), lang='chi_sim').replace(' ','')

	#加入灰度处理
	img = cv2.imread(filePath)
	height = img.shape[0]
	width = img.shape[1]
	channel = img.shape[2]
	for i in range(height):
		if(int(img[i, int(CapXSize / 2), 2]) == 229):
			print(i)
		for j in range(width):
			img[i, j, 0] = img[i, j, 2]
			img[i, j, 1] = img[i, j, 2]
			img[i, j, 2] = img[i, j, 2]
	plt.subplot(1, 1, 1), plt.imshow(img)
	plt.show()

	text1 = pytesseract.image_to_string((img), lang='chi_sim').replace(' ','')
	print(text1)
```



*****


matplotlib
----------

```python
# 绘制多个子图——plt.subplot()
import numpy as np   
import matplotlib.pyplot as plt   

plt.subplot(221) , plt.imshow(cutPic1) //分成2x2，占用第一个，即第一行第一列的子图  
plt.subplot(222) , plt.imshow(cutPic2) //分成2x2，占用第二个，即第一行第二列的子图  
plt.subplot(212) , plt.imshow(cutPic3)//分成2x1，占用第二个，即第二行  

plt.show()  
```